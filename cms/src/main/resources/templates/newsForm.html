<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create News</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}" />
</head>
<body>

<header>
    <h1>Create a New Post</h1>
</header>

<div class="wrapper">
    <section>
        <!-- Form for creating news -->
        <form action="/news/create" method="post">
            <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>

            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required />

            <label for="categoryDropdown">Category:</label>
            <select name="categoryId" id="categoryDropdown">
                <option value="">Select a category</option>
                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
            </select>

            <label for="newCategoryInput">Or add a new category:</label>
            <input type="text" id="newCategoryInput" name="newCategory" placeholder="New category name" />

            <label for="content">Text:</label>
            <textarea id="content" name="content" required></textarea>

            <button type="submit">Submit</button>
        </form>

        <script>
            // Listen for user input in the 'newCategoryInput' field
            document.getElementById('newCategoryInput').addEventListener('input', function() {
                document.getElementById('categoryDropdown').value = '';  // Clear category dropdown if typing a new category
            });
        </script>
    </section>
</div>

</body>
</html>
